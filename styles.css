/* Estilo principal para marcações */
.codemarker-highlight {
  border-radius: 10px;
  overflow: visible;
  cursor: pointer;
  position: relative;
  padding: 4px 2px;
  color: var(--text-normal) !important;
  /* ⚠️ O background-color vem inline via TS */
}

/* Efeito ao passar o mouse (classe JS adicionada) */
.codemarker-highlight.codemarker-hover {
  filter: brightness(1.2);
}

/* Cursores distintos nas alças */
.handle-start {
  cursor: w-resize !important;
}

.handle-end {
  cursor: e-resize !important;
}

/* Container da alça - Mantenha o posicionamento central */
.codemarker-handle {
  position: absolute;
  width: 16px;
  height: 16px;
  z-index: 9999;
  transform: translate(-50%, -50%); /* Centralização ESSENCIAL */
  cursor: pointer;
  margin: 0;
  pointer-events: auto; /* Só a bolinha terá interação */
}

/* Bolinha central - Responsável pelo clique */
.codemarker-ball {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background-color: #6200EE;
  border: 2px solid white;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
  pointer-events: auto; /* Habilita arraste apenas na bolinha */
}

/* Barrinha de início - Dinâmica baseada na seleção */
.codemarker-handle.handle-start::after {
  content: "";
  position: absolute;
  top: calc(100% + 2px); /* Começa logo abaixo da bolinha */
  left: 50%;
  width: 2px;
  background-color: #6200EE;
  border-radius: 10px;
  transform: translateX(-50%);
  z-index: -1; /* Fica atrás do texto */
}

/* Barrinha de fim - Dinâmica baseada na seleção */
.codemarker-handle.handle-end::after {
  content: "";
  position: absolute;
  bottom: calc(100% + 2px); /* Começa logo acima da bolinha */
  left: 50%;
  width: 2px;
  background-color: #6200EE;
  border-radius: 10px;
  transform: translateX(-50%);
  z-index: -1;
}

/* Efeito ao passar o mouse na bolinha */
.codemarker-handle:hover .codemarker-ball {
  transform: scale(1.2);
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.8);
}

.codemarker-handle.handle-start::after,
.codemarker-handle.handle-end::after {
  height: var(--line-height) !important; /* Usa altura exata da linha */
  background-color: #6200EE;
  border-radius: 1px; /* Linha mais fina */
}

.codemarker-handle.handle-end::after {
  height: var(--line-height, 1.5em);
}


